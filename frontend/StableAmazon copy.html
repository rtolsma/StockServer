<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        var stockData=[{"_id":"5967c2d78f5bfe989a3e223e","time":1498224600000,"close":1002.07,"high":1002.54,"low":1002.07,"open":1002.54,"volume":35781},{"_id":"5967c2d78f5bfe989a3e223f","time":1498224660000,"close":1002.38,"high":1003.37,"low":1002.17,"open":1002.5,"volume":7975},{"_id":"5967c2d78f5bfe989a3e2240","time":1498224720000,"close":1003.9185,"high":1004.17,"low":1002.4,"open":1003.101,"volume":11245},{"_id":"5967c2d78f5bfe989a3e2241","time":1498224780000,"close":1003.49,"high":1004.23,"low":1002.75,"open":1004.1161,"volume":11170},{"_id":"5967c2d78f5bfe989a3e2242","time":1498224840000,"close":1003.615,"high":1004.0963,"low":1003.32,"open":1003.6553,"volume":6947},{"_id":"5967c2d78f5bfe989a3e2243","time":1498224900000,"close":1001.5675,"high":1003.57,"low":1001.41,"open":1003.5586,"volume":10208},{"_id":"5967c2d78f5bfe989a3e2244","time":1498224960000,"close":1001.36,"high":1002.66,"low":1000.205,"open":1001.38,"volume":16587},{"_id":"5967c2d78f5bfe989a3e2245","time":1498225020000,"close":1001.46,"high":1001.92,"low":1000.66,"open":1001.17,"volume":3874},{"_id":"5967c2d78f5bfe989a3e2246","time":1498225080000,"close":1000.935,"high":1001.6,"low":1000.2401,"open":1001.35,"volume":8563},{"_id":"5967c2d78f5bfe989a3e2247","time":1498225140000,"close":1001.43,"high":1001.43,"low":1000.781,"open":1000.79,"volume":3900},{"_id":"5967c2d78f5bfe989a3e2248","time":1498225200000,"close":1002.2,"high":1002.2,"low":1001.13,"open":1001.37,"volume":5555},{"_id":"5967c2d78f5bfe989a3e2249","time":1498225260000,"close":1002.8,"high":1002.8,"low":1001.84,"open":1002.18,"volume":5411},{"_id":"5967c2d78f5bfe989a3e224a","time":1498225320000,"close":1002.36,"high":1003.4699,"low":1002.36,"open":1002.84,"volume":12352},{"_id":"5967c2d78f5bfe989a3e224b","time":1498225380000,"close":1001.31,"high":1002.68,"low":1001.3,"open":1002.5,"volume":11557},{"_id":"5967c2d78f5bfe989a3e224c","time":1498225440000,"close":1001.67,"high":1002.1,"low":1001.31,"open":1001.8,"volume":7903},{"_id":"5967c2d78f5bfe989a3e224d","time":1498225500000,"close":1001.615,"high":1002.74,"low":1001.33,"open":1001.96,"volume":5558},{"_id":"5967c2d78f5bfe989a3e224e","time":1498225560000,"close":1000.46,"high":1001.6574,"low":1000,"open":1001.6574,"volume":10967},{"_id":"5967c2d78f5bfe989a3e224f","time":1498225620000,"close":1000.81,"high":1000.81,"low":1000.28,"open":1000.47,"volume":6340},{"_id":"5967c2d78f5bfe989a3e2250","time":1498225680000,"close":1001.3,"high":1001.51,"low":1000.755,"open":1000.7996,"volume":3829},{"_id":"5967c2d78f5bfe989a3e2251","time":1498225740000,"close":1001.3295,"high":1001.655,"low":1000.89,"open":1001.475,"volume":4750},{"_id":"5967c2d78f5bfe989a3e2252","time":1498225800000,"close":1000.37,"high":1001.01,"low":1000.27,"open":1001.01,"volume":1900},{"_id":"5967c2d78f5bfe989a3e2253","time":1498225860000,"close":1000.21,"high":1000.7799,"low":1000.11,"open":1000.31,"volume":5999},{"_id":"5967c2d78f5bfe989a3e2254","time":1498225920000,"close":1000.6,"high":1001.12,"low":1000.37,"open":1000.38,"volume":6172},{"_id":"5967c2d78f5bfe989a3e2255","time":1498225980000,"close":1000.09,"high":1001.11,"low":999.8,"open":1001.11,"volume":18518},{"_id":"5967c2d78f5bfe989a3e2256","time":1498226040000,"close":999.16,"high":1000.29,"low":999.16,"open":999.95,"volume":16844},{"_id":"5967c2d78f5bfe989a3e2257","time":1498226100000,"close":999.48,"high":999.8,"low":999,"open":999.01,"volume":7847},{"_id":"5967c2d78f5bfe989a3e2258","time":1498226160000,"close":998.7802,"high":999.5,"low":998.31,"open":999.4105,"volume":10295},{"_id":"5967c2d78f5bfe989a3e2259","time":1498226220000,"close":998.84,"high":998.84,"low":998.02,"open":998.4,"volume":8265},{"_id":"5967c2d78f5bfe989a3e225a","time":1498226280000,"close":999.415,"high":999.42,"low":998.22,"open":998.77,"volume":7689},{"_id":"5967c2d78f5bfe989a3e225b","time":1498226340000,"close":999.275,"high":999.83,"low":999,"open":999,"volume":3050},{"_id":"5967c2d78f5bfe989a3e225c","time":1498226400000,"close":999.8699,"high":999.8999,"low":999.0689,"open":999.445,"volume":3277},{"_id":"5967c2d78f5bfe989a3e225d","time":1498226460000,"close":1000.4935,"high":1000.875,"low":999.89,"open":999.89,"volume":5483},{"_id":"5967c2d78f5bfe989a3e225e","time":1498226520000,"close":1000.1725,"high":1000.5,"low":1000,"open":1000.5,"volume":4740},{"_id":"5967c2d78f5bfe989a3e225f","time":1498226580000,"close":1000.27,"high":1000.479,"low":1000.02,"open":1000.25,"volume":2125},{"_id":"5967c2d78f5bfe989a3e2260","time":1498226640000,"close":999,"high":1000.129,"low":999,"open":1000.1,"volume":6306},{"_id":"5967c2d78f5bfe989a3e2261","time":1498226700000,"close":999.7957,"high":999.7957,"low":998.88,"open":998.88,"volume":4131},{"_id":"5967c2d78f5bfe989a3e2262","time":1498226760000,"close":999.595,"high":999.7447,"low":999.26,"open":999.614,"volume":3370},{"_id":"5967c2d78f5bfe989a3e2263","time":1498226820000,"close":999.65,"high":999.89,"low":999.47,"open":999.48,"volume":3738},{"_id":"5967c2d78f5bfe989a3e2264","time":1498226880000,"close":999.55,"high":999.99,"low":999.55,"open":999.83,"volume":2780},{"_id":"5967c2d78f5bfe989a3e2265","time":1498226940000,"close":999.67,"high":999.83,"low":999.36,"open":999.51,"volume":5859},{"_id":"5967c2d78f5bfe989a3e2266","time":1498227000000,"close":1000.5041,"high":1000.6,"low":999.51,"open":999.675,"volume":5804},{"_id":"5967c2d78f5bfe989a3e2267","time":1498227060000,"close":1000.315,"high":1000.703,"low":1000.19,"open":1000.703,"volume":2400},{"_id":"5967c2d78f5bfe989a3e2268","time":1498227120000,"close":1000.5428,"high":1000.625,"low":1000.25,"open":1000.468,"volume":3611},{"_id":"5967c2d78f5bfe989a3e2269","time":1498227180000,"close":1000.56,"high":1000.67,"low":1000.24,"open":1000.49,"volume":1900},{"_id":"5967c2d78f5bfe989a3e226a","time":1498227240000,"close":1000.68,"high":1000.7,"low":1000.25,"open":1000.37,"volume":1950},{"_id":"5967c2d78f5bfe989a3e226b","time":1498227300000,"close":1000.709,"high":1001.3,"low":1000.62,"open":1000.77,"volume":3953},{"_id":"5967c2d78f5bfe989a3e2270","time":1498227360000,"close":1001.13,"high":1001.7499,"low":1000.91,"open":1000.96,"volume":6678},{"_id":"5967c2d78f5bfe989a3e2274","time":1498227420000,"close":1000.89,"high":1001.28,"low":1000.66,"open":1001.161,"volume":4299},{"_id":"5967c2d78f5bfe989a3e2277","time":1498227480000,"close":1000.68,"high":1000.93,"low":1000.49,"open":1000.57,"volume":1200},{"_id":"5967c2d78f5bfe989a3e227a","time":1498227540000,"close":1000.45,"high":1000.8534,"low":1000.45,"open":1000.8534,"volume":2200},{"_id":"5967c2d78f5bfe989a3e2283","time":1498227600000,"close":1000.172,"high":1000.405,"low":1000.172,"open":1000.405,"volume":781},{"_id":"5967c2d78f5bfe989a3e228c","time":1498227660000,"close":999.7,"high":1000.49,"low":999.7,"open":1000.195,"volume":7713},{"_id":"5967c2d78f5bfe989a3e22a1","time":1498227720000,"close":1000.73,"high":1000.89,"low":999.94,"open":1000.07,"volume":5127},{"_id":"5967c2d78f5bfe989a3e22a2","time":1498227780000,"close":1000.93,"high":1000.93,"low":1000.1901,"open":1000.1901,"volume":821},{"_id":"5967c2d78f5bfe989a3e22a3","time":1498227840000,"close":1001.1478,"high":1001.44,"low":1000.46,"open":1000.76,"volume":7997},{"_id":"5967c2d78f5bfe989a3e22a4","time":1498227900000,"close":1001.538,"high":1001.749,"low":1001.13,"open":1001.15,"volume":6060},{"_id":"5967c2d78f5bfe989a3e22a5","time":1498227960000,"close":1001.38,"high":1001.99,"low":1001.36,"open":1001.6,"volume":8551},{"_id":"5967c2d78f5bfe989a3e22a6","time":1498228020000,"close":1001.21,"high":1001.715,"low":1001.11,"open":1001.68,"volume":4220},{"_id":"5967c2d78f5bfe989a3e22a7","time":1498228080000,"close":1001.11,"high":1001.45,"low":1000.904,"open":1000.904,"volume":700},{"_id":"5967c2d78f5bfe989a3e22a8","time":1498228140000,"close":1001.38,"high":1001.3956,"low":1001.01,"open":1001.3956,"volume":950},{"_id":"5967c2d78f5bfe989a3e22a9","time":1498228200000,"close":1000.97,"high":1001.3653,"low":1000.97,"open":1001.3653,"volume":4184},{"_id":"5967c2d78f5bfe989a3e22ad","time":1498228260000,"close":1002.16,"high":1002.16,"low":1001,"open":1001,"volume":4826},{"_id":"5967c2d78f5bfe989a3e22bf","time":1498228320000,"close":1002.06,"high":1002.21,"low":1001.64,"open":1002.01,"volume":2967},{"_id":"5967c2d78f5bfe989a3e22c3","time":1498228380000,"close":1003.44,"high":1003.47,"low":1002.21,"open":1002.23,"volume":7418},{"_id":"5967c2d78f5bfe989a3e22cb","time":1498228440000,"close":1002.74,"high":1003.44,"low":1002.72,"open":1003.39,"volume":12734},{"_id":"5967c2d78f5bfe989a3e22d0","time":1498228500000,"close":1002.21,"high":1003.39,"low":1002.21,"open":1003.37,"volume":5599},{"_id":"5967c2d78f5bfe989a3e22d9","time":1498228560000,"close":1002.35,"high":1003,"low":1002.2201,"open":1002.4192,"volume":13155},{"_id":"5967c2d78f5bfe989a3e22dc","time":1498228620000,"close":1002.42,"high":1002.589,"low":1002.08,"open":1002.37,"volume":3353},{"_id":"5967c2d78f5bfe989a3e22df","time":1498228680000,"close":1001.76,"high":1002.47,"low":1001.5749,"open":1002.38,"volume":2739},{"_id":"5967c2d78f5bfe989a3e22e4","time":1498228740000,"close":1001.98,"high":1002.01,"low":1001.565,"open":1001.96,"volume":2300},{"_id":"5967c2d78f5bfe989a3e22e9","time":1498228800000,"close":1002.124,"high":1002.46,"low":1001.61,"open":1001.61,"volume":2923},{"_id":"5967c2d78f5bfe989a3e22ee","time":1498228860000,"close":1002.37,"high":1002.77,"low":1002.33,"open":1002.41,"volume":3648},{"_id":"5967c2d78f5bfe989a3e22f3","time":1498228920000,"close":1002.6,"high":1002.6,"low":1002.15,"open":1002.47,"volume":1400},{"_id":"5967c2d78f5bfe989a3e22f8","time":1498228980000,"close":1002.5316,"high":1002.74,"low":1002.39,"open":1002.5716,"volume":950},{"_id":"5967c2d78f5bfe989a3e22fe","time":1498229040000,"close":1002.37,"high":1002.78,"low":1002.16,"open":1002.52,"volume":7056},{"_id":"5967c2d78f5bfe989a3e2301","time":1498229100000,"close":1002.35,"high":1002.434,"low":1002.16,"open":1002.26,"volume":2673}];
        //var stockData2=[{"_id":"5967c7558f5bfe989a3e4b2a","time":1498224660000,"close":103.52,"high":103.91,"low":103.25,"open":103.83,"volume":364735},{"_id":"5967c7558f5bfe989a3e4b2f","time":1498224720000,"close":103.46,"high":103.59,"low":103.4,"open":103.48,"volume":29930},{"_id":"5967c7558f5bfe989a3e4b34","time":1498224780000,"close":103.42,"high":103.47,"low":103.3,"open":103.43,"volume":67421},{"_id":"5967c7558f5bfe989a3e4b37","time":1498224840000,"close":103.39,"high":103.43,"low":103.37,"open":103.41,"volume":31522},{"_id":"5967c7558f5bfe989a3e4b3c","time":1498224900000,"close":103.22,"high":103.39,"low":103.18,"open":103.39,"volume":78191},{"_id":"5967c7558f5bfe989a3e4b41","time":1498224960000,"close":103.35,"high":103.43,"low":103.2,"open":103.2,"volume":52262},{"_id":"5967c7558f5bfe989a3e4b48","time":1498225020000,"close":103.24,"high":103.34,"low":103.17,"open":103.32,"volume":60292},{"_id":"5967c7558f5bfe989a3e4b4c","time":1498225080000,"close":103.449,"high":103.449,"low":103.22,"open":103.255,"volume":18375},{"_id":"5967c7558f5bfe989a3e4b51","time":1498225140000,"close":103.52,"high":103.5261,"low":103.47,"open":103.47,"volume":17252},{"_id":"5967c7558f5bfe989a3e4b56","time":1498225200000,"close":103.5025,"high":103.559,"low":103.29,"open":103.515,"volume":32698},{"_id":"5967c7558f5bfe989a3e4b5b","time":1498225260000,"close":103.62,"high":103.71,"low":103.51,"open":103.5197,"volume":25729},{"_id":"5967c7558f5bfe989a3e4b61","time":1498225320000,"close":103.76,"high":103.76,"low":103.62,"open":103.635,"volume":12107},{"_id":"5967c7558f5bfe989a3e4b66","time":1498225380000,"close":103.735,"high":103.76,"low":103.65,"open":103.76,"volume":24939},{"_id":"5967c7558f5bfe989a3e4b6b","time":1498225440000,"close":103.75,"high":103.82,"low":103.72,"open":103.75,"volume":19031},{"_id":"5967c7558f5bfe989a3e4b71","time":1498225500000,"close":103.73,"high":103.777,"low":103.64,"open":103.77,"volume":12676},{"_id":"5967c7558f5bfe989a3e4b72","time":1498225560000,"close":103.6,"high":103.81,"low":103.6,"open":103.74,"volume":12459},{"_id":"5967c7558f5bfe989a3e4b77","time":1498225620000,"close":103.57,"high":103.58,"low":103.49,"open":103.58,"volume":16067},{"_id":"5967c7558f5bfe989a3e4b78","time":1498225680000,"close":103.6688,"high":103.6688,"low":103.56,"open":103.575,"volume":19243},{"_id":"5967c7558f5bfe989a3e4b79","time":1498225740000,"close":103.68,"high":103.6998,"low":103.615,"open":103.66,"volume":12114},{"_id":"5967c7558f5bfe989a3e4b7a","time":1498225800000,"close":103.7664,"high":103.8,"low":103.7,"open":103.7,"volume":11204},{"_id":"5967c7558f5bfe989a3e4b86","time":1498225860000,"close":103.71,"high":103.82,"low":103.69,"open":103.77,"volume":16809},{"_id":"5967c7558f5bfe989a3e4b87","time":1498225920000,"close":103.65,"high":103.71,"low":103.57,"open":103.71,"volume":17495},{"_id":"5967c7558f5bfe989a3e4b88","time":1498225980000,"close":103.64,"high":103.725,"low":103.64,"open":103.65,"volume":15742},{"_id":"5967c7558f5bfe989a3e4b89","time":1498226040000,"close":103.55,"high":103.65,"low":103.55,"open":103.6301,"volume":24023},{"_id":"5967c7558f5bfe989a3e4b8a","time":1498226100000,"close":103.4839,"high":103.56,"low":103.45,"open":103.54,"volume":28659},{"_id":"5967c7558f5bfe989a3e4b8b","time":1498226160000,"close":103.47,"high":103.5,"low":103.46,"open":103.48,"volume":16081},{"_id":"5967c7558f5bfe989a3e4b8c","time":1498226220000,"close":103.345,"high":103.47,"low":103.31,"open":103.47,"volume":33799},{"_id":"5967c7558f5bfe989a3e4b8d","time":1498226280000,"close":103.415,"high":103.42,"low":103.33,"open":103.35,"volume":52162},{"_id":"5967c7558f5bfe989a3e4b8e","time":1498226340000,"close":103.45,"high":103.45,"low":103.4,"open":103.415,"volume":14616},{"_id":"5967c7558f5bfe989a3e4b8f","time":1498226400000,"close":103.335,"high":103.445,"low":103.31,"open":103.445,"volume":18451},{"_id":"5967c7558f5bfe989a3e4b90","time":1498226460000,"close":103.43,"high":103.43,"low":103.33,"open":103.34,"volume":18932},{"_id":"5967c7558f5bfe989a3e4b91","time":1498226520000,"close":103.42,"high":103.45,"low":103.41,"open":103.44,"volume":15965},{"_id":"5967c7558f5bfe989a3e4b92","time":1498226580000,"close":103.48,"high":103.485,"low":103.44,"open":103.45,"volume":22781},{"_id":"5967c7558f5bfe989a3e4b93","time":1498226640000,"close":103.6146,"high":103.65,"low":103.4747,"open":103.4747,"volume":23460},{"_id":"5967c7558f5bfe989a3e4b94","time":1498226700000,"close":103.68,"high":103.69,"low":103.615,"open":103.615,"volume":16282},{"_id":"5967c7558f5bfe989a3e4ba4","time":1498226760000,"close":103.66,"high":103.69,"low":103.6299,"open":103.69,"volume":21182},{"_id":"5967c7558f5bfe989a3e4ba5","time":1498226820000,"close":103.66,"high":103.67,"low":103.64,"open":103.66,"volume":14982},{"_id":"5967c7558f5bfe989a3e4ba6","time":1498226880000,"close":103.67,"high":103.69,"low":103.65,"open":103.665,"volume":25936},{"_id":"5967c7558f5bfe989a3e4ba7","time":1498226940000,"close":103.665,"high":103.68,"low":103.57,"open":103.675,"volume":18464},{"_id":"5967c7558f5bfe989a3e4ba8","time":1498227000000,"close":103.67,"high":103.69,"low":103.62,"open":103.6625,"volume":28090},{"_id":"5967c7558f5bfe989a3e4bac","time":1498227060000,"close":103.72,"high":103.72,"low":103.66,"open":103.67,"volume":13258},{"_id":"5967c7558f5bfe989a3e4bad","time":1498227120000,"close":103.73,"high":103.76,"low":103.71,"open":103.72,"volume":12568},{"_id":"5967c7558f5bfe989a3e4bb2","time":1498227180000,"close":103.65,"high":103.73,"low":103.65,"open":103.72,"volume":19474},{"_id":"5967c7558f5bfe989a3e4bb7","time":1498227240000,"close":103.64,"high":103.665,"low":103.64,"open":103.66,"volume":13926},{"_id":"5967c7558f5bfe989a3e4bbd","time":1498227300000,"close":103.6353,"high":103.65,"low":103.599,"open":103.63,"volume":16168},{"_id":"5967c7558f5bfe989a3e4bc5","time":1498227360000,"close":103.59,"high":103.65,"low":103.59,"open":103.63,"volume":44824},{"_id":"5967c7558f5bfe989a3e4bcd","time":1498227420000,"close":103.6133,"high":103.62,"low":103.6,"open":103.6,"volume":18482},{"_id":"5967c7558f5bfe989a3e4bd0","time":1498227480000,"close":103.56,"high":103.615,"low":103.56,"open":103.615,"volume":20013},{"_id":"5967c7558f5bfe989a3e4bd6","time":1498227540000,"close":103.625,"high":103.625,"low":103.555,"open":103.555,"volume":19482},{"_id":"5967c7558f5bfe989a3e4bdb","time":1498227600000,"close":103.705,"high":103.71,"low":103.62,"open":103.625,"volume":20618},{"_id":"5967c7558f5bfe989a3e4bde","time":1498227660000,"close":103.67,"high":103.705,"low":103.66,"open":103.7,"volume":39719},{"_id":"5967c7558f5bfe989a3e4be0","time":1498227720000,"close":103.74,"high":103.74,"low":103.665,"open":103.68,"volume":8899},{"_id":"5967c7558f5bfe989a3e4be5","time":1498227780000,"close":103.76,"high":103.79,"low":103.72,"open":103.735,"volume":32765},{"_id":"5967c7558f5bfe989a3e4bea","time":1498227840000,"close":103.74,"high":103.7657,"low":103.73,"open":103.76,"volume":15507},{"_id":"5967c7558f5bfe989a3e4bed","time":1498227900000,"close":103.76,"high":103.78,"low":103.73,"open":103.755,"volume":11169},{"_id":"5967c7558f5bfe989a3e4bef","time":1498227960000,"close":103.79,"high":103.8,"low":103.75,"open":103.75,"volume":10887},{"_id":"5967c7558f5bfe989a3e4bf7","time":1498228020000,"close":103.79,"high":103.82,"low":103.79,"open":103.8,"volume":13326},{"_id":"5967c7558f5bfe989a3e4bf9","time":1498228080000,"close":103.72,"high":103.8,"low":103.71,"open":103.795,"volume":6097},{"_id":"5967c7558f5bfe989a3e4bfd","time":1498228140000,"close":103.71,"high":103.765,"low":103.71,"open":103.72,"volume":28100},{"_id":"5967c7558f5bfe989a3e4c02","time":1498228200000,"close":103.7,"high":103.72,"low":103.7,"open":103.72,"volume":7388},{"_id":"5967c7558f5bfe989a3e4c08","time":1498228260000,"close":103.675,"high":103.705,"low":103.65,"open":103.705,"volume":13068},{"_id":"5967c7558f5bfe989a3e4c0b","time":1498228320000,"close":103.7,"high":103.71,"low":103.66,"open":103.665,"volume":9258},{"_id":"5967c7558f5bfe989a3e4c0e","time":1498228380000,"close":103.75,"high":103.75,"low":103.7,"open":103.7,"volume":18940},{"_id":"5967c7558f5bfe989a3e4c11","time":1498228440000,"close":103.78,"high":103.78,"low":103.72,"open":103.75,"volume":19937},{"_id":"5967c7558f5bfe989a3e4c17","time":1498228500000,"close":103.815,"high":103.82,"low":103.78,"open":103.78,"volume":12994},{"_id":"5967c7558f5bfe989a3e4c1b","time":1498228560000,"close":103.8,"high":103.82,"low":103.78,"open":103.815,"volume":18758},{"_id":"5967c7558f5bfe989a3e4c1d","time":1498228620000,"close":103.81,"high":103.81,"low":103.79,"open":103.809,"volume":6682},{"_id":"5967c7558f5bfe989a3e4c22","time":1498228680000,"close":103.8105,"high":103.82,"low":103.8,"open":103.805,"volume":15812},{"_id":"5967c7558f5bfe989a3e4c27","time":1498228740000,"close":103.82,"high":103.82,"low":103.8,"open":103.815,"volume":12194},{"_id":"5967c7558f5bfe989a3e4c2b","time":1498228800000,"close":103.76,"high":103.815,"low":103.75,"open":103.8138,"volume":17093},{"_id":"5967c7558f5bfe989a3e4c30","time":1498228860000,"close":103.785,"high":103.79,"low":103.75,"open":103.76,"volume":23316},{"_id":"5967c7558f5bfe989a3e4c35","time":1498228920000,"close":103.765,"high":103.79,"low":103.76,"open":103.78,"volume":10717},{"_id":"5967c7558f5bfe989a3e4c3a","time":1498228980000,"close":103.74,"high":103.77,"low":103.735,"open":103.76,"volume":13531},{"_id":"5967c7558f5bfe989a3e4c3d","time":1498229040000,"close":103.755,"high":103.785,"low":103.74,"open":103.745,"volume":22070},{"_id":"5967c7558f5bfe989a3e4c41","time":1498229100000,"close":103.79,"high":103.8,"low":103.75,"open":103.76,"volume":13923},{"_id":"5967c7558f5bfe989a3e4c46","time":1498229160000,"close":103.8,"high":103.825,"low":103.79,"open":103.8,"volume":17945},{"_id":"5967c7558f5bfe989a3e4c4c","time":1498229220000,"close":103.825,"high":103.825,"low":103.795,"open":103.8,"volume":9559},{"_id":"5967c7558f5bfe989a3e4c51","time":1498229280000,"close":103.82,"high":103.855,"low":103.81,"open":103.82,"volume":23542}];
        var newData=[];
        for(var i=0;i<50;i++){
            d=new Date(stockData[i].time);
            place=[d,stockData[i].low,stockData[i].open,stockData[i].close,stockData[i].high];
            newData.push(place);
        }
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable(newData, true);
            var chart = new google.visualization.CandlestickChart(document.getElementById('chart_div'));
             var days = 5;
             var view = new google.visualization.DataView(data);
             view.setColumns([0, 1, 2, 3, 4, {
                type: 'number',
                label: days + '-minute Moving Average',
                calc: function (dt, row) {
                // calculate average of closing value for last x days,
                // if we are x or more days into the data set
                if (row >= days - 1) {
                    var total = 0;
                    for (var i = 0; i < days; i++) {
                        total += dt.getValue(row - i, 3);
                    }
                    var avg = total / days;
                    return {v: avg, f: avg.toFixed(2)};
                }
                else {
                // return null for < x days
                    return null;
                }
            }
        }]);
        var options={
            height: 400,
            width: 1300,
            candlestick: {
                    fallingColor: { strokeWidth: 0, fill: '#a52714' }, // red
                    risingColor: { strokeWidth: 0, fill: '#0f9d58' }   // green
                },
                bar: { groupWidth: '90%' },
            chartArea: {
                 left: '7%',
                width: '100%'
             },
            series: {
                 0: {
                    type: 'candlesticks'
                 },
                 1: {
                    type: 'line'
                }
            }
        }
        chart.draw(view,options);
        var i=50;
        setInterval(() => update(view, options), 5 * 1000);
            function update(data,options){
                var d2=new Date(stockData[i].time);
                newData.shift();
                newData.push([d2,stockData[i].low,stockData[i].open,stockData[i].close,stockData[i].high])//pushes new data to use
                data=google.visualization.arrayToDataTable(newData, true);
                var view = new google.visualization.DataView(data);
                view.setColumns([0, 1, 2, 3, 4, {//sets up the moving average
                type: 'number',
                label: days + '-minute Moving Average',
                calc: function (dt, row) {
                // calculate average of closing value for last x days,
                // if we are x or more days into the data set
                if (row >= days - 1) {
                    var total = 0;
                    for (var i = 0; i < days; i++) {
                        total += dt.getValue(row - i, 3);
                    }
                    var avg = total / days;
                    return {v: avg, f: avg.toFixed(2)};
                }
                else {
                // return null for < x days
                    return null;
                }
            }
        }]);
                chart.draw(view,options);
                i++;
            }
        google.load("visualization", "1", {packages:["corechart"], callback: drawChart});
        } 
    </script>
  </head>
  <body>
      <h2 style="color:grey;">Amazon</h2>
    <div id="chart_div" style="width: 2000px; height: 500px;"></div>
  </body>
</html>


